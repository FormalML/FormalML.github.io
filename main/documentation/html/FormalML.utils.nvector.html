
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module FormalML.utils.nvector</title>
<meta name="description" content="Documentation of Coq module FormalML.utils.nvector" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module FormalML.utils.nvector</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html">BinInt</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.lib_utils.LibUtils.html">LibUtils</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html">VectorDef</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="FormalML.utils.Vector.html">Vector</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Vector">Vector</a></span>.<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vector">vector</a></span> (<span class="id">T</span>:<span class="kwd">Type</span>) (<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) := <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.Vector.html#t">Vector.t</a></span> <span class="id">T</span> <span class="id">n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vnil">vnil</a></span> {<span class="id">T</span>} : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> 0 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#nil">nil</a></span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vcons">vcons</a></span> {<span class="id">T</span>} (<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id">T</span>) (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#cons">cons</a></span> <span class="id">T</span> <span class="id">c</span> <span class="id">n</span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vappend">vappend</a></span> {<span class="id">T</span>} (<span class="id">n1</span> <span class="id">n2</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">v1</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n1</span>) (<span class="id">v2</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n2</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> (<span class="id">n1</span> + <span class="id">n2</span>) <br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#append">append</a></span> <span class="id">v1</span> <span class="id">v2</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vmap">vmap</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">n</span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">B</span>) (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">B</span> <span class="id">n</span> :=  <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#map">map</a></span> <span class="id">f</span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vhd">vhd</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)):<span class="id">T</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#hd">hd</a></span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vtl">vtl</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#tl">tl</a></span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vlast">vlast</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>)) := <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#last">last</a></span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vnth">vnth</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>}  (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) (<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">i</span>&lt;<span class="id">n</span>) : <span class="id">T</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#nth">nth</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.Fin.html#of_nat_lt">Fin.of_nat_lt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">i</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vec_fun">vec_fun</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) : {<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">i</span>&lt;<span class="id">n</span>} -&gt; <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">v</span> <span class="id">i</span>.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="ConstVector">ConstVector</a></span> {<span class="id">T</span>} (<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id">T</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#of_list">of_list</a></span> (<span class="tactic">repeat</span> <span class="id">c</span> <span class="id">n</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2104')">Next Obligation.</div>
<div class="proofscript" id="proof2104">
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#repeat_length">repeat_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="build_vector">build_vector</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span>:{<span class="id">n</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">n</span>' &lt; <span class="id">n</span>}%<span class="id">nat</span> -&gt; <span class="id">T</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#of_list">of_list</a></span> (<span class="id"><a href="FormalML.utils.Vector.html#vector_to_list">Vector.vector_to_list</a></span> <span class="id">v</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2105')">Next Obligation.</div>
<div class="proofscript" id="proof2105">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FormalML.utils.Vector.html#vector_to_list_length">Vector.vector_to_list_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="to_list_length">to_list_length</a></span> {<span class="id">T</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v</span>) = <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">v</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">f_equal</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="vcombine">vcombine</a></span> {<span class="id">T1</span> <span class="id">T2</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v1</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T1</span> <span class="id">n</span>) (<span class="id">v2</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T2</span> <span class="id">n</span>): <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> (<span class="id">T1</span>*<span class="id">T2</span>) <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#of_list">of_list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">combine</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v2</span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2106')">Next Obligation.</div>
<div class="proofscript" id="proof2106">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine_length">combine_length</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="FormalML.utils.nvector.html#to_list_length">to_list_length</a></span>, <span class="id"><a href="FormalML.utils.nvector.html#to_list_length">to_list_length</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.min_id">PeanoNat.Nat.min_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vector_zip">vector_zip</a></span> {<span class="id">T1</span> <span class="id">T2</span>} {<span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v1</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T1</span> <span class="id">n</span>) (<span class="id">v2</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T2</span> <span class="id">n</span>): <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> (<span class="id">T1</span>*<span class="id">T2</span>) <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">v1</span> <span class="id">v2</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vmap2">vmap2</a></span> {<span class="id">A</span> <span class="id">B</span> <span class="id">C</span>} {<span class="id">n</span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">B</span>-&gt;<span class="id">C</span>) (<span class="id">v1</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) (<span class="id">v2</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">B</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">C</span> <span class="id">n</span><br/>
&nbsp;&nbsp;:=  <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.Vector.html#map2">Vector.map2</a></span> <span class="id">f</span> <span class="id">v1</span> <span class="id">v2</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vmap4">vmap4</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">n</span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">A</span>-&gt;<span class="id">A</span>-&gt;<span class="id">A</span>-&gt;<span class="id">B</span>) (<span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span> <span class="id">v4</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">B</span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vmap2">vmap2</a></span> (<span class="kwd">fun</span> '(<span class="id">a1</span>,<span class="id">a2</span>) '(<span class="id">a3</span>,<span class="id">a4</span>) =&gt; <span class="id">f</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">a3</span> <span class="id">a4</span>) (<span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">v1</span> <span class="id">v2</span>) (<span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">v3</span> <span class="id">v4</span>).<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="vectoro_to_ovector">vectoro_to_ovector</a></span> {<span class="id">T</span>} {<span class="id">n</span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">T</span>) <span class="id">n</span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id"><a href="FormalML.lib_utils.LibUtilsLiftIterators.html#listo_to_olist">listo_to_olist</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">l</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#of_list">of_list</a></span> <span class="id">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2107')">Next Obligation.</div>
<div class="proofscript" id="proof2107">
&nbsp;&nbsp;<span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">Heq_anonymous</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="FormalML.lib_utils.LibUtilsLiftIterators.html#listo_to_olist_some">listo_to_olist_some</a></span> <span class="kwd">in</span> <span class="id">Heq_anonymous</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_length">map_length</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Heq_anonymous</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="FormalML.utils.nvector.html#to_list_length">to_list_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="vforall">vforall</a></span> {<span class="id">A</span>} {<span class="id">m</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">P</span>: <span class="id">A</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">m</span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.Vector.html#Forall">Vector.Forall</a></span> <span class="id">P</span> <span class="id">v</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.utils.nvector.html#Vector">Vector</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Matrix">Matrix</a></span>.<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Definition</span> <span class="id"><a name="matrix">matrix</a></span> (<span class="id">T</span>:<span class="kwd">Type</span>) (<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) := <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">m</span>) <span class="id">n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mat_fun">mat_fun</a></span> {<span class="id">T</span>:<span class="kwd">Type</span>} (<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">mat</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">n</span> <span class="id">m</span> ) :<br/>
&nbsp;&nbsp;{<span class="id">n</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">n</span>' &lt; <span class="id">n</span>}%<span class="id">nat</span> -&gt; {<span class="id">m</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">m</span>' &lt; <span class="id">m</span>}%<span class="id">nat</span> -&gt; <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">fun</span> <span class="id">j</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">mat</span> <span class="id">i</span>) <span class="id">j</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mmap">mmap</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">n</span> <span class="id">m</span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">B</span>) (<span class="id">mat</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">A</span> <span class="id">n</span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">B</span> <span class="id">n</span> <span class="id">m</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> <span class="id">f</span>) <span class="id">mat</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mnth">mnth</a></span> {<span class="id">T</span>} {<span class="id">n</span> <span class="id">m</span> :<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>}  (<span class="id">v</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">n</span> <span class="id">m</span>) (<span class="id">i</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">i</span>&lt;<span class="id">n</span>) (<span class="id">j</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">j</span>&lt;<span class="id">m</span>) : <span class="id">T</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">v</span> <span class="id">i</span>) <span class="id">j</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mcombine">mcombine</a></span> {<span class="id">T1</span> <span class="id">T2</span>} {<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">mat1</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T1</span> <span class="id">n</span> <span class="id">m</span>) (<span class="id">mat2</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T2</span> <span class="id">n</span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> (<span class="id">T1</span>*<span class="id">T2</span>) <span class="id">n</span> <span class="id">m</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> (<span class="kwd">fun</span> '(<span class="id">a</span>,<span class="id">b</span>) =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">a</span> <span class="id">b</span>) (<span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">mat1</span> <span class="id">mat2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="matrix_zip">matrix_zip</a></span> {<span class="id">T1</span> <span class="id">T2</span>} {<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">mat1</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T1</span> <span class="id">n</span> <span class="id">m</span>) (<span class="id">mat2</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T2</span> <span class="id">n</span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> (<span class="id">T1</span>*<span class="id">T2</span>) <span class="id">n</span> <span class="id">m</span> := <span class="id"><a href="FormalML.utils.nvector.html#mcombine">mcombine</a></span> <span class="id">mat1</span> <span class="id">mat2</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="build_matrix">build_matrix</a></span> {<span class="id">T</span>} {<span class="id">n</span> <span class="id">m</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mat</span>:{<span class="id">n</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">n</span>' &lt; <span class="id">n</span>}%<span class="id">nat</span> -&gt; {<span class="id">m</span>':<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> | <span class="id">m</span>' &lt; <span class="id">m</span>}%<span class="id">nat</span> -&gt; <span class="id">T</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">n</span> <span class="id">m</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> <span class="id"><a href="FormalML.utils.nvector.html#build_vector">build_vector</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#build_vector">build_vector</a></span> <span class="id">mat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transpose">transpose</a></span> {<span class="id">T</span>} {<span class="id">m</span> <span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">mat</span>:<span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">m</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">n</span> <span class="id">m</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.nvector.html#build_matrix">build_matrix</a></span> (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">j</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#mnth">mnth</a></span> <span class="id">mat</span> <span class="id">j</span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ConstMatrix">ConstMatrix</a></span> {<span class="id">T</span>} (<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id">T</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">n</span> <span class="id">m</span> := <br/>
&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#ConstVector">ConstVector</a></span> <span class="id">n</span> (<span class="id"><a href="FormalML.utils.nvector.html#ConstVector">ConstVector</a></span> <span class="id">m</span> <span class="id">c</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="matrixo_to_omatrix">matrixo_to_omatrix</a></span> {<span class="id">T</span>} {<span class="id">m</span> <span class="id">n</span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">T</span>) <span class="id">m</span> <span class="id">n</span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">T</span> <span class="id">m</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.nvector.html#vectoro_to_ovector">vectoro_to_ovector</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> <span class="id"><a href="FormalML.utils.nvector.html#vectoro_to_ovector">vectoro_to_ovector</a></span> <span class="id">v</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mmap2">mmap2</a></span> {<span class="id">A</span> <span class="id">B</span> <span class="id">C</span>} {<span class="id">n</span> <span class="id">m</span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">B</span>-&gt;<span class="id">C</span>) (<span class="id">v1</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">A</span> <span class="id">n</span> <span class="id">m</span>) (<span class="id">v2</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">B</span> <span class="id">n</span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">C</span> <span class="id">n</span> <span class="id">m</span> :=  <span class="id"><a href="FormalML.utils.nvector.html#vmap2">vmap2</a></span> (<span class="kwd">fun</span> <span class="id">r1</span> <span class="id">r2</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vmap2">vmap2</a></span> <span class="id">f</span> <span class="id">r1</span> <span class="id">r2</span>) <span class="id">v1</span> <span class="id">v2</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mforall">mforall</a></span> {<span class="id">A</span>} {<span class="id">m</span> <span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">P</span>: <span class="id">A</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">m</span>:<span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id">A</span> <span class="id">m</span> <span class="id">n</span>) : <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.nvector.html#vforall">vforall</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vforall">vforall</a></span> <span class="id">P</span> <span class="id">x</span>) <span class="id">m</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.utils.nvector.html#Matrix">Matrix</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Tensor">Tensor</a></span>.<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="tensor">tensor</a></span> <span class="id">T</span> (<span class="id">l</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : <span class="kwd">Type</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">List.nil</span> =&gt; <span class="id">T</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">x</span>::<span class="id">l</span>' =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> (<span class="id">tensor</span> <span class="id">T</span> <span class="id">l</span>') <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tensor0">tensor0</a></span> <span class="id">T</span> : <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">List.nil</a></span> = <span class="id">T</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2108')">Proof.</div>
<div class="proofscript" id="proof2108">
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tensor1">tensor1</a></span> <span class="id">T</span> <span class="id">n</span> : <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> (<span class="id">n</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">List.nil</a></span>) = <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2109')">Proof.</div>
<div class="proofscript" id="proof2109">
&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="tensor_app">tensor_app</a></span> <span class="id">T</span> <span class="id">l1</span> <span class="id">l2</span> : <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> <span class="id">l1</span>) <span class="id">l2</span> = <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> (<span class="id">l2</span>++<span class="id">l1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2110')">Proof.</div>
<div class="proofscript" id="proof2110">
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">l1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l2</span>; <span class="tactic">intros</span> <span class="id">l1</span>; <span class="tactic">simpl</span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">IHl2</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="ConstTensor">ConstTensor</a></span> {<span class="id">T</span>} (<span class="id">l</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id">T</span>) : (<span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> <span class="id">l</span>) := <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">l</span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;| <span class="id">List.nil</span> =&gt; <span class="id">c</span><br/>
&nbsp;&nbsp;| <span class="id">x</span>::<span class="id">l</span>' =&gt; <span class="id"><a href="FormalML.utils.nvector.html#ConstVector">ConstVector</a></span> <span class="id">x</span> (<span class="id">ConstTensor</span> <span class="id">l</span>' <span class="id">c</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Tensor_map">Tensor_map</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">dims</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">f</span>:<span class="id">A</span>-&gt;<span class="id">B</span>) : <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">A</span> <span class="id">dims</span> -&gt; <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">B</span> <span class="id">dims</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">dims</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">List.nil</span> =&gt; <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">x</span>::<span class="id">l</span>' =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> (<span class="id">Tensor_map</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="scalar">scalar</a></span> {<span class="id">T</span>} (<span class="id">c</span>:<span class="id">T</span>) : <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> <span class="id">T</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#nil">List.nil</a></span> := <span class="id">c</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.utils.nvector.html#Tensor">Tensor</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="NumericType">NumericType</a></span><br/>
&nbsp;&nbsp;:= <span class="id"><a name="FloatType">FloatType</a></span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id"><a name="IntTYpe">IntTYpe</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ntype_interp">ntype_interp</a></span> (<span class="id">n</span>:<span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) : <span class="kwd">Type</span><br/>
&nbsp;&nbsp;:= <span class="kwd">match</span> <span class="id">n</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="FormalML.utils.nvector.html#FloatType">FloatType</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">IntType</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Structure</span> <span class="id"><a name="BigArray">BigArray</a></span> (<span class="id">ln</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">T</span> : <span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) : <span class="kwd">Type</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Tensor">Tensor</a></span> { <span class="id"><a name="tdata">tdata</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>); <span class="id">_</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">tdata</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Nat.html#mul">Nat.mul</a></span> 1%<span class="id">nat</span> <span class="id">ln</span> }.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Structure</span> <span class="id"><a name="Array1">Array1</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">T</span> : <span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) : <span class="kwd">Type</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="array1">array1</a></span> { <span class="id"><a name="a1data">a1data</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>); <span class="id">_</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">a1data</span> = <span class="id">n</span>}.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Structure</span> <span class="id"><a name="Array2">Array2</a></span> (<span class="id">n</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">T</span> : <span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) : <span class="kwd">Type</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="array2">array2</a></span> { <span class="id"><a name="a2data">a2data</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>); <span class="id">_</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">length</a></span> <span class="id">a2data</span> = <span class="id">n</span> * <span class="id">m</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="tensor_abs_type">tensor_abs_type</a></span>  (<span class="id">T</span>:<span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) (<span class="id">dims</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) := <span class="id"><a href="FormalML.utils.nvector.html#tensor">tensor</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>) <span class="id">dims</span>.<br/>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="TensorDef">TensorDef</a></span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;<span class="id"><a name="tensor_t">tensor_t</a></span> (<span class="id">T</span>:<span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>) (<span class="id">dims</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) : <span class="kwd">Type</span><br/>
&nbsp;&nbsp;; <span class="id"><a name="tensor_repr">tensor_repr</a></span> {<span class="id">T</span>:<span class="id"><a href="FormalML.utils.nvector.html#NumericType">NumericType</a></span>} {<span class="id">dims</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} : <span class="id">tensor_t</span> <span class="id">T</span> <span class="id">dims</span> -&gt; <span class="id"><a href="FormalML.utils.nvector.html#tensor_abs_type">tensor_abs_type</a></span> <span class="id">T</span> <span class="id">dims</span> -&gt; <span class="kwd">Prop</span><br/>
<br/>
&nbsp;&nbsp;; <span class="id"><a name="tensor_const">tensor_const</a></span> {<span class="id">T</span>} (<span class="id">dims</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>) : <span class="id">tensor_t</span> <span class="id">T</span> <span class="id">dims</span><br/>
&nbsp;&nbsp;; <span class="id"><a name="tensor_const_p">tensor_const_p</a></span> {<span class="id">T</span>} (<span class="id">dims</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">c</span>:<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">T</span>) : <span class="id">tensor_repr</span> (<span class="id">tensor_const</span> <span class="id">dims</span> <span class="id">c</span>) (<span class="id"><a href="FormalML.utils.nvector.html#ConstTensor">ConstTensor</a></span> <span class="id">dims</span> <span class="id">c</span>)<br/>
<br/>
&nbsp;&nbsp;; <span class="id"><a name="tensor_map">tensor_map</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">dims</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">f</span>:<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">A</span>-&gt; <span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">B</span>) (<span class="id">t</span>:<span class="id">tensor_t</span> <span class="id">A</span> <span class="id">dims</span>) : <span class="id">tensor_t</span> <span class="id">B</span> <span class="id">dims</span><br/>
&nbsp;&nbsp;; <span class="id"><a name="tensor_map_p">tensor_map_p</a></span> {<span class="id">A</span> <span class="id">B</span>} {<span class="id">dims</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">f</span>:<span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">A</span>-&gt; <span class="id"><a href="FormalML.utils.nvector.html#ntype_interp">ntype_interp</a></span> <span class="id">B</span>)  (<span class="id">t</span>:<span class="id">tensor_t</span> <span class="id">A</span> <span class="id">dims</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">tensor_repr</span> <span class="id">t</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tensor_repr</span> (<span class="id">tensor_map</span> <span class="id">f</span> <span class="id">t</span>) (<span class="id"><a href="FormalML.utils.nvector.html#Tensor_map">Tensor_map</a></span> <span class="id">f</span> <span class="id">r</span>)<br/>
<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.utils.Floatish.html">Floatish</a></span>.<br/>
<span class="kwd">Section</span> <span class="id"><a name="float_ops">float_ops</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">floatish_impl</span>:<span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#floatish">floatish</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">float</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vsum">vsum</a></span> {<span class="id">m</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#Fplus">Fplus</a></span> 0 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="msum">msum</a></span> {<span class="id">m</span> <span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vsum">vsum</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> <span class="id"><a href="FormalML.utils.nvector.html#vsum">vsum</a></span> <span class="id">v</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vdot">vdot</a></span> {<span class="id">m</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v1</span> <span class="id">v2</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">List.fold_right</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#Fplus">Fplus</a></span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">List.map</a></span> (<span class="kwd">fun</span> '(<span class="id">a</span>,<span class="id">b</span>) =&gt; <span class="id">a</span> * <span class="id">b</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#combine">combine</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Vectors.VectorDef.html#to_list">to_list</a></span> <span class="id">v2</span>))).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vadd">vadd</a></span> {<span class="id">m</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">v1</span> <span class="id">v2</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> (<span class="kwd">fun</span> '(<span class="id">a</span>,<span class="id">b</span>) =&gt; <span class="id">a</span>+<span class="id">b</span>) (<span class="id"><a href="FormalML.utils.nvector.html#vcombine">vcombine</a></span> <span class="id">v1</span> <span class="id">v2</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="madd">madd</a></span> {<span class="id">m</span> <span class="id">n</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} (<span class="id">mat1</span> <span class="id">mat2</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span> <span class="id">n</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#mmap">mmap</a></span> (<span class="kwd">fun</span> '(<span class="id">a</span>,<span class="id">b</span>) =&gt; <span class="id">a</span>+<span class="id">b</span>) (<span class="id"><a href="FormalML.utils.nvector.html#mcombine">mcombine</a></span> <span class="id">mat1</span> <span class="id">mat2</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="matrix_vector_mult">matrix_vector_mult</a></span> {<span class="id">n</span> <span class="id">m</span>} (<span class="id">l</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> <span class="id">m</span>)(<span class="id">r</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span>) : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#vmap">vmap</a></span> (<span class="kwd">fun</span> <span class="id">l1</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vdot">vdot</a></span> <span class="id">l1</span> <span class="id">r</span>) <span class="id">l</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="matrix_vector_add">matrix_vector_add</a></span> {<span class="id">n</span> <span class="id">m</span>} (<span class="id">l</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> <span class="id">m</span>) (<span class="id">r</span> : <span class="id"><a href="FormalML.utils.nvector.html#vector">vector</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> <span class="id">m</span> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#build_matrix">build_matrix</a></span> (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">j</span> =&gt; (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">l</span> <span class="id">i</span>) <span class="id">j</span>) + (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">r</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="matrix_mult">matrix_mult</a></span> {<span class="id">n</span> <span class="id">m</span> <span class="id">p</span>} (<span class="id">l</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> <span class="id">m</span>)(<span class="id">r</span> : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">m</span> <span class="id">p</span>) : <span class="id"><a href="FormalML.utils.nvector.html#matrix">matrix</a></span> <span class="id"><a href="FormalML.utils.Floatish.FloatishDef.html#float">float</a></span> <span class="id">n</span> <span class="id">p</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.nvector.html#build_matrix">build_matrix</a></span> (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">k</span> =&gt; <span class="id"><a href="FormalML.utils.nvector.html#vsum">vsum</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#build_vector">build_vector</a></span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">j</span> =&gt; (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">l</span> <span class="id">i</span>) <span class="id">j</span>) * <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> (<span class="id"><a href="FormalML.utils.nvector.html#vnth">vnth</a></span> <span class="id">r</span> <span class="id">j</span>) <span class="id">k</span>)))).<br/>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.utils.nvector.html#float_ops">float_ops</a></span>.<br/>
<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
