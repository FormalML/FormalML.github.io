
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module FormalML.ProbTheory.VectorConditionalExpectation</title>
<meta name="description" content="Documentation of Coq module FormalML.ProbTheory.VectorConditionalExpectation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module FormalML.ProbTheory.VectorConditionalExpectation</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Morphisms.html">Morphisms</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.Equivalence.html">Equivalence</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html">Program.Basics</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Lra.html">Lra</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Classical.html">Classical</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.ClassicalChoice.html">ClassicalChoice</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html">RelationClasses</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">FunctionalExtensionality</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.IndefiniteDescription.html">IndefiniteDescription</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.ClassicalDescription.html">ClassicalDescription</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.CertRL.LM.hilbert.html">hilbert</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html">ConditionalExpectation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html">VectorRandomVariable</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.ProbTheory.RbarExpectation.html">RbarExpectation</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.ProbTheory.Event.html">Event</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html">Almost</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.utils.Utils.html">utils.Utils</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html">List</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="FormalML.utils.DVector.html">DVector</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Set</span> <span class="id">Bullet</span> <span class="id">Behavior</span> "<span class="id">Strict</span> <span class="id">Subproofs</span>". <br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="vec_exp">vec_exp</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">Ts</span>:<span class="kwd">Type</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom</span>: <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">prts</span>: <span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#ProbSpace">ProbSpace</a></span> <span class="id">dom</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Class</span> <span class="id"><a name="vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a name="is_vector_finite_expectation">is_vector_finite_expectation</a></span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="FormalML.utils.Isomorphism.html#iso_f">iso_f</a></span> <span class="id">rv_X</span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_IsFiniteExpectation_nth">vector_IsFiniteExpectation_nth</a></span> {<span class="id">n</span>} (<span class="id">f</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <span class="id">i</span> <span class="id">pf</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_Forall">vector_Forall</a></span> <span class="id">_</span> <span class="id">isfe</span> <span class="id">i</span> <span class="id">pf</span>); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vector_IsFiniteExpectation_Finite">vector_IsFiniteExpectation_Finite</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">x</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span> | <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="id">rv_X</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id">Finite</span> <span class="id">x</span>)}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">x</span>) (<span class="id">isfe</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.utils.DVector.html#vector_dep_zip">vector_dep_zip</a></span> <span class="id">_</span> <span class="id">isfe</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span> <span class="kwd">in</span> <span class="id">isfe</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vectoro_to_ovector_some_eq">vectoro_to_ovector_some_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_map_map">vector_map_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">isfe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">iso_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#fun_to_vector_to_vector_of_funs">fun_to_vector_to_vector_of_funs</a></span> <span class="id">rv_X</span>); <span class="id">clear</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">induction</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">v</span>); <span class="id">simpl</span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">isfe</span>; <span class="id">intros</span> <span class="id">isfe</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">isfe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_Expectation">FiniteExpectation_Expectation</a></span> <span class="id">_</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">IHl</span> <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_ext">FiniteExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.utils.ListAdd.html#list_dep_zip_ext_map">list_dep_zip_ext_map</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_ext">FiniteExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vector_FiniteExpectation">vector_FiniteExpectation</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X</span>} : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation_Finite">vector_IsFiniteExpectation_Finite</a></span> <span class="id">rv_X</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteExpectation_Expectation">vector_FiniteExpectation_Expectation</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span>-&gt;<span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X</span>} : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="id">rv_X</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id">Finite</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id">rv_X</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_Expectation_const">vector_Expectation_const</a></span> <span class="id">n</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>) = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id">Finite</span> <span class="id">c</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">eqq1</span>:<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation">Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#fun_to_vector_to_vector_of_funs">fun_to_vector_to_vector_of_funs</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id">Finite</span> <span class="id">c</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">replace</span>  (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span> <span class="id">x</span>)) <span class="kwd">with</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> (<span class="id">B</span>:=<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span>) (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">c</span>)) <span class="kwd">by</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation_const">Expectation_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eqq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vectoro_to_ovector_some_eq">vectoro_to_ovector_some_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="FormalML.lib_utils.LibUtilsLiftIterators.html#listo_to_olist_simpl_lift_map">listo_to_olist_simpl_lift_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.lib_utils.LibUtilsLiftIterators.html#lift_map_id">lift_map_id</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteExpectation_const">vector_FiniteExpectation_const</a></span> <span class="id">n</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>) = <span class="id">c</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_Expectation_const">vector_Expectation_const</a></span> <span class="id">n</span> <span class="id">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation_Expectation">vector_FiniteExpectation_Expectation</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">real</span> <span class="id">x</span>)) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_id">map_id</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_eq">vector_eq</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_IsFiniteExpectation_proper_almostR2">vector_IsFiniteExpectation_proper_almostR2</a></span> {<span class="id">n</span>} <span class="id">rv_X1</span> <span class="id">rv_X2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv1</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv2</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span>)  <span class="kwd">as</span> [<span class="id">_</span> <span class="id">HH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HH</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="kwd">in</span> <span class="id">isfe1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_Forall">vector_Forall</a></span> <span class="kwd">in</span> <span class="id">isfe1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HH</span> <span class="id">i</span> <span class="id">pf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper_almostR2">IsFiniteExpectation_proper_almostR2</a></span>; <span class="id">try</span> <span class="id">eapply</span> <span class="id">isfe1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vec_rv">vec_rv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vec_rv">vec_rv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span>) <span class="kwd">as</span> [<span class="id">_</span> <span class="id">HH2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id">HH2</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_Expectation_proper_almostR2">vector_Expectation_proper_almostR2</a></span> {<span class="id">n</span>} <span class="id">rv_X1</span> <span class="id">rv_X2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv1</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv2</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="id">rv_X1</span> = <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="id">rv_X2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span>) <span class="kwd">as</span> [<span class="id">_</span> <span class="id">HH2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">HH2</span> <span class="id">H</span> <span class="id">i</span> <span class="id">pf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation_almostR2_proper">Expectation_almostR2_proper</a></span>; <span class="id">trivial</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth_rv">vecrvnth_rv</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteExpectation_proper_almostR2">vector_FiniteExpectation_proper_almostR2</a></span> {<span class="id">n</span>} <span class="id">rv_X1</span> <span class="id">rv_X2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv1</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rrv2</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id">rv_X1</span> = <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id">rv_X2</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_Expectation_proper_almostR2">vector_Expectation_proper_almostR2</a></span> <span class="id">rv_X1</span> <span class="id">rv_X2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation_Expectation">vector_FiniteExpectation_Expectation</a></span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">real</span> <span class="id">x</span>)) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_id">map_id</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_eq">vector_eq</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_nth_SimpleExpectation">vector_nth_SimpleExpectation</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfev</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#FiniteRangeFunction">FiniteRangeFunction</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span> <span class="id">pf</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_SimpleExpectation">vector_SimpleExpectation</a></span> <span class="id">f</span>) = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.SimpleExpectation.html#SimpleExpectation">SimpleExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_SimpleExpectation">vector_SimpleExpectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_create">vector_nth_create</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.SimpleExpectation.html#SimpleExpectation_ext">SimpleExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_ext">vector_nth_ext</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_nth_FiniteExpectation">vector_nth_FiniteExpectation</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfev</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span> <span class="id">pf</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id">f</span>) = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span>, <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span>, <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">match_destr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vectoro_to_ovector_some_eq">vectoro_to_ovector_some_eq</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.lib_utils.LibUtilsLiftIterators.html#listo_to_olist_some">listo_to_olist_some</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#proj1_sig_vector_map">proj1_sig_vector_map</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> &lt;- <span class="id"><a href="FormalML.utils.DVector.html#proj1_sig_vector_map">proj1_sig_vector_map</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_eq">vector_eq</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span>)) <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="kwd">in</span> <span class="id">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">e0</span> <span class="kwd">in</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="vector_IsFiniteExpectation_simple">vector_IsFiniteExpectation_simple</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvx_rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">frf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#FiniteRangeFunction">FiniteRangeFunction</a></span> <span class="id">rv_X</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_simple">IsFiniteExpectation_simple</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vec_rv">vec_rv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vec_frf">vec_frf</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteExpectation_simple">vector_FiniteExpectation_simple</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvx_rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">frf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#FiniteRangeFunction">FiniteRangeFunction</a></span> <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">rv_X</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id">rv_X</span> = <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_SimpleExpectation">vector_SimpleExpectation</a></span> <span class="id">rv_X</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_FiniteExpectation">vector_nth_FiniteExpectation</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_SimpleExpectation">vector_nth_SimpleExpectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_simple">FiniteExpectation_simple</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_exp">vec_exp</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="id"><a href="FormalML.utils.Finite.html">Finite</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="vec_cond_exp">vec_cond_exp</a></span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">Ts</span>:<span class="kwd">Type</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom</span>: <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">prts</span>: <span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#ProbSpace">ProbSpace</a></span> <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom2</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sub">sa_sub</a></span> <span class="id">dom2</span> <span class="id">dom</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.Isomorphism.html#iso_b">iso_b</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">isfe</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rv</span>:=<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj2_sig">proj2_sig</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.utils.DVector.html#vector_dep_zip">vector_dep_zip</a></span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_and">Forall_and</a></span> <span class="id">isfe</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_RandomVariable">vector_RandomVariable</a></span> <span class="id">f</span>)))).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteConditionalExpectation_ext">vector_FiniteConditionalExpectation_ext</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> <span class="id">f1</span> <span class="id">f2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f1</span> = <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f2</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;classically&nbsp;true&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">f1</span> = <span class="id">f2</span>) <span class="kwd">by</span> <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html#functional_extensionality">functional_extensionality</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>; <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_dep_zip_map1">vector_dep_zip_map1</a></span> {<span class="id">T</span> : <span class="kwd">Type</span>} {<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>} {<span class="id">n</span>} (<span class="id">l</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>) (<span class="id">Fp</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">l</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id">P</span>:=<span class="id">P</span>)) (<span class="id"><a href="FormalML.utils.DVector.html#vector_dep_zip">vector_dep_zip</a></span> <span class="id">l</span> <span class="id">Fp</span>) = <span class="id">l</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_eq">vector_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_dep_zip">vector_dep_zip</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.ListAdd.html#list_dep_zip_map1">list_dep_zip_map1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_dep_zip_nth_proj1">vector_dep_zip_nth_proj1</a></span> {<span class="id">T</span>} {<span class="id">n</span>} {<span class="id">P</span>:<span class="id">T</span>-&gt;<span class="kwd">Prop</span>} (<span class="id">v</span>:<span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">T</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fl</span>:<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> <span class="id">P</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">v</span>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_dep_zip">vector_dep_zip</a></span> <span class="id">v</span> <span class="id">fl</span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">v</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span> (@<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_dep_zip_map1">vector_dep_zip_map1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>' {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} <span class="id">i</span> <span class="id">pf</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>)).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>; <span class="id">simpl</span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_of_funs_vector_nth">vector_of_funs_vector_nth</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_dep_zip_nth_proj1">vector_dep_zip_nth_proj1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} <span class="id">i</span> <span class="id">pf</span> <span class="id">a</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span> <span class="id">a</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) <span class="id">a</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_FiniteCondexp_rv">vector_FiniteCondexp_rv</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#RandomVariable_vector">RandomVariable_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.Isomorphism.html#iso_f_b">iso_f_b</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [?[??]]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_rv">FiniteCondexp_rv</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_cond_exp">vector_FiniteCondexp_cond_exp</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">P</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#pre_event">pre_event</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">dec</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#dec_pre_event">dec_pre_event</a></span> <span class="id">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">saP</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sigma">sa_sigma</a></span> (<span class="id">SigmaAlgebra</span> := <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span>) <span class="id">P</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> <span class="id">dec</span> <span class="id">x</span>) <span class="id">n</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> <span class="id">dec</span> <span class="id">x</span>) <span class="id">n</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">iso_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation">Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvmult">rvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> <span class="id">dec</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation_proper">Expectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_cond_exp">FiniteCondexp_cond_exp</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) <span class="id">dec</span> <span class="id">saP</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation_proper">Expectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="vector_FiniteCondexp_cond_exp_classic">vector_FiniteCondexp_cond_exp_classic</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">P</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#pre_event">pre_event</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">saP</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sigma">sa_sigma</a></span> (<span class="id">SigmaAlgebra</span> := <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span>) <span class="id">P</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> (<span class="id"><a href="FormalML.ProbTheory.Event.html#classic_dec">classic_dec</a></span> <span class="id">P</span>) <span class="id">x</span>) <span class="id">n</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> (<span class="id"><a href="FormalML.ProbTheory.Event.html#classic_dec">classic_dec</a></span> <span class="id">P</span>) <span class="id">x</span>) <span class="id">n</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_cond_exp">vector_FiniteCondexp_cond_exp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="vector_FiniteCondexp_cond_exp_event">vector_FiniteCondexp_cond_exp_event</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">P</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#event">event</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">dec</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#dec_event">dec_event</a></span> <span class="id">P</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> <span class="id">dec</span> <span class="id">x</span>) <span class="id">n</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> <span class="id">dec</span> <span class="id">x</span>) <span class="id">n</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_cond_exp">vector_FiniteCondexp_cond_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">P</span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="vector_FiniteCondexp_cond_exp_event_classic">vector_FiniteCondexp_cond_exp_event_classic</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#event">event</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> (<span class="id"><a href="FormalML.ProbTheory.Event.html#classic_dec">classic_dec</a></span> <span class="id">P</span>) <span class="id">x</span>) <span class="id">n</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#EventIndicator">EventIndicator</a></span> (<span class="id"><a href="FormalML.ProbTheory.Event.html#classic_dec">classic_dec</a></span> <span class="id">P</span>) <span class="id">x</span>) <span class="id">n</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_cond_exp_event">vector_FiniteCondexp_cond_exp_event</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_FiniteCondexp_nneg">vector_FiniteCondexp_nneg</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pf</span>, <span class="id"><a href="FormalML.ProbTheory.RealRandomVariable.html#NonnegativeFunction">NonnegativeFunction</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id">f</span> <span class="id">x</span>))) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">pf</span>, <span class="id"><a href="FormalML.ProbTheory.RealRandomVariable.html#NonnegativeFunction">NonnegativeFunction</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span> <span class="id">x</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ????.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_nneg">FiniteCondexp_nneg</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_id">vector_FiniteCondexp_id</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) <span class="id">f</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_id">FiniteCondexp_id</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth_rv">vecrvnth_rv</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_IsFiniteExpectation_const">vector_IsFiniteExpectation_const</a></span> {<span class="id">n</span>} (<span class="id">c</span>:<span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">try</span> <span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_const">IsFiniteExpectation_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="vector_FiniteCondexp_const">vector_FiniteCondexp_const</a></span> {<span class="id">n</span>} <span class="id">c</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id">n</span>:=<span class="id">n</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>)) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id">c</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_const">FiniteCondexp_const</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">c</span>) <span class="id">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_Expectation">vector_FiniteCondexp_Expectation</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span> <span class="id">f</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_Expectation">vector_Expectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation">Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation_proper">Expectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_Expectation">FiniteCondexp_Expectation</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_FiniteCondexp_isfe">vector_FiniteCondexp_isfe</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_isfe">FiniteCondexp_isfe</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Corollary</span> <span class="id"><a name="vector_FiniteCondexp_FiniteExpectation">vector_FiniteCondexp_FiniteExpectation</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_Expectation">vector_FiniteCondexp_Expectation</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation_Expectation">vector_FiniteExpectation_Expectation</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invcs</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#f_equal">f_equal</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id">real</span> <span class="id">x</span>)) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_map">map_map</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map_id">map_id</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_eq">vector_eq</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_proper">vector_FiniteCondexp_proper</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">f1</span> <span class="id">f2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">eqq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_proper">FiniteCondexp_proper</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut_to</span> <span class="id">HH</span>; [| <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_ale">vector_FiniteCondexp_ale</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vectorize_relation">vectorize_relation</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rle">Rle</a></span> <span class="id">n</span>) <span class="id">f1</span> <span class="id">f2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) (<span class="id"><a href="FormalML.utils.DVector.html#vectorize_relation">vectorize_relation</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rle">Rle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">eqq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vectorize_relation_almost">vectorize_relation_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_ale">FiniteCondexp_ale</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut_to</span> <span class="id">HH</span>; [| <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vectorize_relation_almost">vectorize_relation_almost</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_IsFiniteExpectation_scale">vector_IsFiniteExpectation_scale</a></span> {<span class="id">n</span>} (<span class="id">c</span>:<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) (<span class="id">f</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span> <span class="id">c</span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">try</span> <span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_scale">IsFiniteExpectation_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvscale">rvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_scale">RealVectorHilbert.Rvector_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_scale">vector_FiniteCondexp_scale</a></span> {<span class="id">n</span>} <span class="id">c</span> (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span> <span class="id">c</span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span> <span class="id">c</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvscale">rvscale</a></span> <span class="id">c</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>)) <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvscale">rvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_scale">RealVectorHilbert.Rvector_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvscale">rvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_scale">RealVectorHilbert.Rvector_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_scale">FiniteCondexp_scale</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_opp">vector_FiniteCondexp_opp</a></span> {<span class="id">n</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvopp">vecrvopp</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvopp">vecrvopp</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvopp">rvopp</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>)) <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvopp">vecrvopp</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_scale">RealVectorHilbert.Rvector_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvopp">vecrvopp</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvscale">vecrvscale</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_scale">RealVectorHilbert.Rvector_scale</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_opp">FiniteCondexp_opp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="vector_IsFiniteExpectation_plus">vector_IsFiniteExpectation_plus</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span> <span class="id">f1</span> <span class="id">f2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">try</span> <span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_plus">IsFiniteExpectation_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_plus">RealVectorHilbert.Rvector_nth_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>. <br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>. <br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_plus">vector_FiniteCondexp_plus</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span> <span class="id">f1</span> <span class="id">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f2</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvplus">rvplus</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f2</span>)) <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_plus">RealVectorHilbert.Rvector_nth_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_plus">RealVectorHilbert.Rvector_nth_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_plus">FiniteCondexp_plus</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_minus">vector_FiniteCondexp_minus</a></span> {<span class="id">n</span>} (<span class="id">f1</span> <span class="id">f2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvminus">vecrvminus</a></span> <span class="id">f1</span> <span class="id">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvminus">vecrvminus</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f2</span>)).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvminus">vecrvminus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_minus_rv">Rvector_minus_rv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_plus">vector_FiniteCondexp_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvplus">vecrvplus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_opp">vector_FiniteCondexp_opp</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_factor_out">vector_FiniteCondexp_factor_out</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>)  <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvg</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvgf</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>)  (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfef</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfefg</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">g</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> <span class="id"><a href="FormalML.ProbTheory.BorelSigmaAlgebra.html#borel_sa">borel_sa</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvmult">rvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth_rv">vecrvnth_rv</a></span> <span class="kwd">in</span> <span class="id">rvgf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="kwd">in</span> <span class="id">rvgf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">rvgf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_proper">RandomVariable_proper</a></span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvmult">rvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">g</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation_nth">vector_IsFiniteExpectation_nth</a></span> <span class="kwd">in</span> <span class="id">isfefg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">isfefg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; [| <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_factor_out">FiniteCondexp_factor_out</a></span>; <span class="id">typeclasses</span> <span class="id">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.FunctionsToReal.html#rvmult">rvmult</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">g</span>)) <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_nth_mult">RealVectorHilbert.Rvector_nth_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="vector_apply">vector_apply</a></span> {<span class="id">n</span>} {<span class="id">A</span> <span class="id">B</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> (<span class="id">A</span> -&gt; <span class="id">B</span>) <span class="id">n</span>)  (<span class="id">x</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">B</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> (<span class="kwd">fun</span> '(<span class="id">a</span>,<span class="id">b</span>) =&gt; <span class="id">a</span> <span class="id">b</span>) (<span class="id"><a href="FormalML.utils.DVector.html#vector_zip">vector_zip</a></span> <span class="id">f</span> <span class="id">x</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_nth_apply">vector_nth_apply</a></span> {<span class="id">n</span>} {<span class="id">A</span> <span class="id">B</span>} (<span class="id">f</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> (<span class="id">A</span> -&gt; <span class="id">B</span>) <span class="id">n</span>)  (<span class="id">x</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) <span class="id">i</span> <span class="id">pf</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> <span class="id">f</span> <span class="id">x</span>) = (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>) (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">x</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_zip">vector_nth_zip</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_apply_const">vector_apply_const</a></span> {<span class="id">n</span>} {<span class="id">A</span> <span class="id">B</span>} (<span class="id">f</span>: <span class="id">A</span>-&gt;<span class="id">B</span>) (<span class="id">a</span>:<span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id">A</span> <span class="id">n</span>) : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> <span class="id">f</span> <span class="id">n</span>) <span class="id">a</span> = <span class="id"><a href="FormalML.utils.DVector.html#vector_map">vector_map</a></span> <span class="id">f</span> <span class="id">a</span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_Jensen">vector_FiniteCondexp_Jensen</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) (<span class="id">phi</span> : <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>) <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvphi</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> <span class="id">phi</span> (<span class="id">rv_X</span> <span class="id">x</span>))}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfephi</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> <span class="id">phi</span> (<span class="id">rv_X</span> <span class="id">x</span>))} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall">Forall</a></span> (<span class="kwd">fun</span> <span class="id">f</span> =&gt; <span class="kwd">forall</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="FormalML.utils.RealAdd.html#convex">convex</a></span> <span class="id">f</span> <span class="id">c</span> <span class="id">x</span> <span class="id">y</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">phi</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) (<span class="id"><a href="FormalML.utils.DVector.html#vectorize_relation">vectorize_relation</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rle">Rle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> <span class="id">phi</span> ((<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">rv_X</span>) <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> <span class="id">phi</span> (<span class="id">rv_X</span> <span class="id">x</span>))).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vectorize_relation_almost">vectorize_relation_almost</a></span>; <span class="id">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> <span class="id"><a href="FormalML.ProbTheory.BorelSigmaAlgebra.html#borel_sa">borel_sa</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">phi</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">rv_X</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth_rv">vecrvnth_rv</a></span> <span class="kwd">in</span> <span class="id">rvphi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">rvphi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_proper">RandomVariable_proper</a></span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">phi</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">rv_X</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation_nth">vector_IsFiniteExpectation_nth</a></span> <span class="kwd">in</span> <span class="id">isfephi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">isfephi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; [| <span class="id">apply</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_Jensen">FiniteCondexp_Jensen</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">rv_X</span>) (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth">vector_nth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">phi</span>))].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">eapply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_Forall">vector_Forall</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vecrvabs_unfold">vecrvabs_unfold</a></span> {<span class="id">n</span>} (<span class="id">a</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) : <span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span> <span class="id">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">n</span>) (<span class="id">a</span> <span class="id">x</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span>, <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_abs">RealVectorHilbert.Rvector_abs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply_const">vector_apply_const</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_Jensen_abs">vector_FiniteCondexp_Jensen_abs</a></span> {<span class="id">n</span>} (<span class="id">rv_X</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">rv_X</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfephi</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span> <span class="id">rv_X</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.sub">sub</a></span>) (<span class="id"><a href="FormalML.utils.DVector.html#vectorize_relation">vectorize_relation</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rle">Rle</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">rv_X</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span> <span class="id">rv_X</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">rvphi</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">n</span>) (<span class="id">rv_X</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#RandomVariable_vector">RandomVariable_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.RealRandomVariable.html#rvabs_rv">rvabs_rv</a></span> <span class="id">_</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">rv_X</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_proper">RandomVariable_proper</a></span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">isfephi</span>' : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_apply">vector_apply</a></span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">n</span>) (<span class="id">rv_X</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation_nth">vector_IsFiniteExpectation_nth</a></span> <span class="kwd">in</span> <span class="id">isfephi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">isfephi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_apply">vector_nth_apply</a></span>, <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>, <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvabs">vecrvabs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_abs">RealVectorHilbert.Rvector_abs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; [| <span class="id">apply</span> (@<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_Jensen">vector_FiniteCondexp_Jensen</a></span> <span class="id">_</span> <span class="id">rv_X</span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_const">vector_const</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">n</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vecrvabs_unfold">vecrvabs_unfold</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation_nth">vector_FiniteConditionalExpectation_nth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vecrvabs_unfold">vecrvabs_unfold</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#Forall_vector">Forall_vector</a></span>; <span class="id">intros</span> ?????.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_const">vector_nth_const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.RealAdd.html#abs_convex">abs_convex</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_isfe_In_isfe">vector_isfe_In_isfe</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">c</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">pf</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">c</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="FormalML.utils.Isomorphism.html#iso_f">iso_f</a></span> <span class="id">f</span>))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">c</span>.<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span> <span class="kwd">in</span> <span class="id">isfe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#Forall_forall">Forall_forall</a></span> <span class="kwd">in</span> <span class="id">isfe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">FiniteExpectation_vecrvsum</span>' {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Expectation.html#Expectation">Expectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvsum">vecrvsum</a></span> <span class="id">f</span>) = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">Finite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_sum">RealVectorHilbert.Rvector_sum</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>))).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvsum">vecrvsum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.utils.BasicUtils.html#rv_eq">rv_eq</a></span> (<span class="kwd">fun</span> <span class="id">omega</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.utils.RealAdd.html#list_sum">RealAdd.list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id">f</span> <span class="id">omega</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">omega</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> =&gt; <span class="id"><a href="FormalML.utils.RealAdd.html#list_sum">RealAdd.list_sum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> <span class="id">omega</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> (<span class="id"><a href="FormalML.utils.Isomorphism.html#iso_f">iso_f</a></span> (<span class="id">Isomorphism</span>:=(@<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_iso">vector_iso</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)) <span class="id">f</span>)) ))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="FormalML.utils.DVector.html#proj1_sig_vector_map">proj1_sig_vector_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map">vector_nth_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span> <span class="id">iso_f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteExpectation_list_sum_in">FiniteExpectation_list_sum_in</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_sum">RealVectorHilbert.Rvector_sum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="FormalML.utils.DVector.html#proj1_sig_vector_map_onto">proj1_sig_vector_map_onto</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 4 <span class="id">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#vector_nth_eq">vector_nth_eq</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [|- <span class="id">context</span> [<span class="id"><a href="FormalML.utils.DVector.html#vector_map_onto">vector_map_onto</a></span> ?<span class="id">v</span> ?<span class="id">f</span> ]] =&gt; <span class="id">destruct</span> (<span class="id"><a href="FormalML.utils.DVector.html#vector_nth_map_onto">vector_nth_map_onto</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">v</span> <span class="id">f</span> <span class="id">i</span> <span class="id">pf</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_nth_FiniteExpectation">vector_nth_FiniteExpectation</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_ext">FiniteExpectation_ext</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_fun_to_vector">vector_nth_fun_to_vector</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.utils.DVector.html#In_vector_nth_ex">In_vector_nth_ex</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [? [??]]; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vec_rv">vec_rv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_isfe_In_isfe">vector_isfe_In_isfe</a></span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Instance</span> <span class="id"><a name="IsFiniteExpectation_vecrvsum">IsFiniteExpectation_vecrvsum</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvsum">vecrvsum</a></span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> (<span class="id">FiniteExpectation_vecrvsum</span>' <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="IsFiniteExpectation_inner_vecrvmult">IsFiniteExpectation_inner_vecrvmult</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvg</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner">rvinner</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#IsFiniteExpectation_vecrvsum">IsFiniteExpectation_vecrvsum</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation_proper">IsFiniteExpectation_proper</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner_unfold">rvinner_unfold</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="FiniteExpectation_vecrvsum">FiniteExpectation_vecrvsum</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfev</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvsum">vecrvsum</a></span> <span class="id">f</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_sum">RealVectorHilbert.Rvector_sum</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_Expectation">FiniteExpectation_Expectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvsum">vecrvsum</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">FiniteExpectation_vecrvsum</span>' <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="FiniteExpectation_rvinner">FiniteExpectation_rvinner</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvgf</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfefg</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner">rvinner</a></span> <span class="id">f</span> <span class="id">g</span>) = <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_sum">RealVectorHilbert.Rvector_sum</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#FiniteExpectation_vecrvsum">FiniteExpectation_vecrvsum</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_ext">FiniteExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner_unfold">rvinner_unfold</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_factor_out_zero">vector_FiniteCondexp_factor_out_zero</a></span>  {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvgf</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfef</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfefg</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_zero">RealVectorHilbert.Rvector_zero</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation">vector_FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>) = <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_zero">RealVectorHilbert.Rvector_zero</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">rvfg</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span>  (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_mult_rv">Rvector_mult_rv</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_sa_sub">RandomVariable_sa_sub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_FiniteExpectation">vector_FiniteCondexp_FiniteExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_factor_out">vector_FiniteCondexp_factor_out</a></span> <span class="id">f</span> <span class="id">g</span>); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_zero">RealVectorHilbert.Rvector_zero</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2_prob_space_sa_sub_lift">almostR2_prob_space_sa_sub_lift</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H1</span>; <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>; <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ???.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_mult_zero">RealVectorHilbert.Rvector_mult_zero</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation_proper_almostR2">vector_FiniteExpectation_proper_almostR2</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">try</span> <span class="id">eapply</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteExpectation_const">vector_FiniteExpectation_const</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#rvconst">rvconst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_sa_sub">RandomVariable_sa_sub</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#rvconst">rvconst</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_factor_out_inner_zero">vector_FiniteCondexp_factor_out_inner_zero</a></span>  {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvg</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvgf</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfef</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfefg</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_zero">RealVectorHilbert.Rvector_zero</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner">rvinner</a></span> <span class="id">f</span> <span class="id">g</span>) = 0.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span>  <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#FiniteExpectation_rvinner">FiniteExpectation_rvinner</a></span> <span class="kwd">with</span> (<span class="id">isfefg0</span> := <span class="id">isfefg</span>); <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_factor_out_zero">vector_FiniteCondexp_factor_out_zero</a></span> <span class="kwd">with</span> (<span class="id">rvf0</span> := <span class="id">rvf</span>) (<span class="id">isfef0</span> := <span class="id">isfef</span>); <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_sum0">RealVectorHilbert.Rvector_sum0</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_factor_out_inner_zero_swapped">vector_FiniteCondexp_factor_out_inner_zero_swapped</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvg</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvgf</span>: <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom2">dom2</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">g</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfef</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfefg</span>:<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">g</span> <span class="id">f</span>)} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">f</span>) (<span class="id"><a href="https://coq.inria.fr/library/Coq.Program.Basics.html#const">const</a></span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_zero">RealVectorHilbert.Rvector_zero</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation">FiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner">rvinner</a></span> <span class="id">g</span> <span class="id">f</span>) = 0.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">g</span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_mult_rv">Rvector_mult_rv</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_mult_rv">Rvector_mult_rv</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation_proper_almostR2">vector_IsFiniteExpectation_proper_almostR2</a></span> <span class="id">_</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">g</span> <span class="id">f</span>)); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">H2</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span> <span class="id">f</span> <span class="id">g</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">isfefg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvmult">vecrvmult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_mult_comm">RealVectorHilbert.Rvector_mult_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_factor_out_inner_zero">vector_FiniteCondexp_factor_out_inner_zero</a></span> <span class="id">f</span> <span class="id">g</span> <span class="id">H</span>); <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#FiniteExpectation_proper_almostR2">FiniteExpectation_proper_almostR2</a></span>; <span class="id">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">unfold</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#rvinner">rvinner</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">rewrite</span> <span class="id"><a href="FormalML.ProbTheory.RealVectorHilbert.html#Rvector_inner_comm">RealVectorHilbert.Rvector_inner_comm</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp">vec_cond_exp</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="vec_cond_exp_props">vec_cond_exp_props</a></span>.<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">Ts</span>:<span class="kwd">Type</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom</span>: <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">prts</span>: <span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#ProbSpace">ProbSpace</a></span> <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom2</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sub">sa_sub</a></span> <span class="id">dom2</span> <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom3</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub2</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sub">sa_sub</a></span> <span class="id">dom3</span> <span class="id">dom2</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">vector_FiniteCondexp_tower</span>' {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv</span>:<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> <span class="id">f</span>)}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>) <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.dom">dom</a></span> <span class="id"><a href="FormalML.ProbTheory.BorelSigmaAlgebra.html#borel_sa">borel_sa</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariableFinite.html#IsFiniteExpectation">IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">typeclasses</span> <span class="id">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.dom">dom</a></span> <span class="id"><a href="FormalML.ProbTheory.BorelSigmaAlgebra.html#borel_sa">borel_sa</a></span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation">FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth_rv">vecrvnth_rv</a></span> <span class="id">i</span> <span class="id">pf</span>) <span class="kwd">in</span> <span class="id">rv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">rv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_proper">RandomVariable_proper</a></span>; <span class="id">try</span> <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eapply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; [| <span class="id">apply</span> <span class="id">FiniteCondexp_tower</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etransitivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;; [| <span class="id">etransitivity</span>; [<span class="id">apply</span> <span class="id">H2</span> |]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">intros</span> ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteConditionalExpectation_ext">FiniteConditionalExpectation_ext</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Theorem</span> <span class="id"><a name="vector_FiniteCondexp_tower">vector_FiniteCondexp_tower</a></span> {<span class="id">n</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.Ts">Ts</a></span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rvf</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.dom">dom</a></span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe</span>: <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">rv</span>:=<span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable_sa_sub">RandomVariable_sa_sub</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> <span class="id">_</span> (<span class="id">rv_x</span>:=<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteCondexp_rv">vector_FiniteCondexp_rv</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span> <span class="id">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.prts">prts</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Classes.RelationClasses.html#transitivity">transitivity</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub2">sub2</a></span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props.sub">sub</a></span>) <span class="id">f</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">vector_FiniteCondexp_tower</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vec_cond_exp_props">vec_cond_exp_props</a></span>.<br/>
<span class="kwd">Section</span> <span class="id"><a name="condexp">condexp</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="vector_FiniteCondexp_all_proper">vector_FiniteCondexp_all_proper</a></span> {<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>} {<span class="id">Ts</span>:<span class="kwd">Type</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom</span>: <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">prts</span>: <span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#ProbSpace">ProbSpace</a></span> <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">dom2</span> <span class="id">dom2</span>' : <span class="id"><a href="FormalML.ProbTheory.Event.html#SigmaAlgebra">SigmaAlgebra</a></span> <span class="id">Ts</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub</span> : <span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sub">sa_sub</a></span> <span class="id">dom2</span> <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub</span>' : <span class="id"><a href="FormalML.ProbTheory.Event.html#sa_sub">sa_sub</a></span> <span class="id">dom2</span>' <span class="id">dom</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sub_equiv</span>:<span class="id"><a href="FormalML.ProbTheory.Event.html#sa_equiv">sa_equiv</a></span> <span class="id">dom2</span> <span class="id">dom2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f1</span> <span class="id">f2</span> : <span class="id">Ts</span> -&gt; <span class="id"><a href="FormalML.utils.DVector.html#vector">vector</a></span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#RbaseSymbolsImpl.R">R</a></span> <span class="id">n</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv1</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id">dom</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">rv2</span> : <span class="id"><a href="FormalML.ProbTheory.RandomVariable.html#RandomVariable">RandomVariable</a></span> <span class="id">dom</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#Rvector_borel_sa">Rvector_borel_sa</a></span> <span class="id">n</span>) <span class="id">f2</span>} <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe1</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">prts</span> <span class="id">f1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">isfe2</span> : <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_IsFiniteExpectation">vector_IsFiniteExpectation</a></span> <span class="id">prts</span> <span class="id">f2</span>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> <span class="id">prts</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id">f1</span> <span class="id">f2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="FormalML.ProbTheory.Almost.html#almostR2">almostR2</a></span> (<span class="id"><a href="FormalML.ProbTheory.ProbSpace.html#prob_space_sa_sub">prob_space_sa_sub</a></span> <span class="id">prts</span> <span class="id">sub</span>) <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">prts</span> <span class="id">sub</span> <span class="id">f1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#vector_FiniteConditionalExpectation">vector_FiniteConditionalExpectation</a></span> <span class="id">prts</span> <span class="id">sub</span>' <span class="id">f2</span>).<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">intros</span> <span class="id">eqq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">generalize</span> (<span class="id"><a href="FormalML.ProbTheory.ConditionalExpectation.html#FiniteCondexp_all_proper">FiniteCondexp_all_proper</a></span> <span class="id">prts</span> <span class="id">sub</span> <span class="id">sub</span>' <span class="id">sub_equiv</span> (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f1</span>) (<span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vecrvnth">vecrvnth</a></span> <span class="id">i</span> <span class="id">pf</span> <span class="id">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id">intros</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut_to</span> <span class="id">HH</span>; [| <span class="id">now</span> <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.VectorRandomVariable.html#vector_nth_eq_almost">vector_nth_eq_almost</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#almost_impl">almost_impl</a></span>; <span class="id">apply</span> <span class="id"><a href="FormalML.ProbTheory.Almost.html#all_almost">all_almost</a></span>; <span class="id">intros</span> ??.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">repeat</span> <span class="id">rewrite</span> <span class="id">vector_FiniteConditionalExpectation_nth</span>'.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="FormalML.ProbTheory.VectorConditionalExpectation.html#condexp">condexp</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
